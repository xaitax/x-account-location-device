/**
 * X-Posed Mobile App - Country Flags & Device Emojis
 * Comprehensive mapping based on browser extension
 */

// Complete country flags mapping (200+ countries)
export const countryFlags: Record<string, string> = {
  // A
  'afghanistan': 'üá¶üá´',
  'albania': 'üá¶üá±',
  'algeria': 'üá©üáø',
  'andorra': 'üá¶üá©',
  'angola': 'üá¶üá¥',
  'antigua and barbuda': 'üá¶üá¨',
  'argentina': 'üá¶üá∑',
  'armenia': 'üá¶üá≤',
  'australia': 'üá¶üá∫',
  'austria': 'üá¶üáπ',
  'azerbaijan': 'üá¶üáø',
  
  // B
  'bahamas': 'üáßüá∏',
  'bahrain': 'üáßüá≠',
  'bangladesh': 'üáßüá©',
  'barbados': 'üáßüáß',
  'belarus': 'üáßüáæ',
  'belgium': 'üáßüá™',
  'belize': 'üáßüáø',
  'benin': 'üáßüáØ',
  'bhutan': 'üáßüáπ',
  'bolivia': 'üáßüá¥',
  'bosnia and herzegovina': 'üáßüá¶',
  'bosnia': 'üáßüá¶',
  'botswana': 'üáßüáº',
  'brazil': 'üáßüá∑',
  'brunei': 'üáßüá≥',
  'bulgaria': 'üáßüá¨',
  'burkina faso': 'üáßüá´',
  'burundi': 'üáßüáÆ',
  'burma': 'üá≤üá≤',
  
  // C
  'cambodia': 'üá∞üá≠',
  'cameroon': 'üá®üá≤',
  'canada': 'üá®üá¶',
  'cape verde': 'üá®üáª',
  'central african republic': 'üá®üá´',
  'chad': 'üáπüá©',
  'chile': 'üá®üá±',
  'china': 'üá®üá≥',
  'colombia': 'üá®üá¥',
  'comoros': 'üá∞üá≤',
  'congo': 'üá®üá¨',
  'costa rica': 'üá®üá∑',
  'croatia': 'üá≠üá∑',
  'cuba': 'üá®üá∫',
  'cyprus': 'üá®üáæ',
  'czech republic': 'üá®üáø',
  'czechia': 'üá®üáø',
  
  // D
  'democratic republic of the congo': 'üá®üá©',
  'denmark': 'üá©üá∞',
  'djibouti': 'üá©üáØ',
  'dominica': 'üá©üá≤',
  'dominican republic': 'üá©üá¥',
  
  // E
  'east timor': 'üáπüá±',
  'ecuador': 'üá™üá®',
  'egypt': 'üá™üá¨',
  'el salvador': 'üá∏üáª',
  'england': 'üè¥Û†ÅßÛ†Å¢Û†Å•Û†ÅÆÛ†ÅßÛ†Åø',
  'equatorial guinea': 'üá¨üá∂',
  'eritrea': 'üá™üá∑',
  'estonia': 'üá™üá™',
  'eswatini': 'üá∏üáø',
  'ethiopia': 'üá™üáπ',
  'europe': 'üá™üá∫',
  'european union': 'üá™üá∫',
  
  // F
  'fiji': 'üá´üáØ',
  'finland': 'üá´üáÆ',
  'france': 'üá´üá∑',
  'french guiana': 'üá¨üá´',
  
  // G
  'gabon': 'üá¨üá¶',
  'gambia': 'üá¨üá≤',
  'georgia': 'üá¨üá™',
  'germany': 'üá©üá™',
  'ghana': 'üá¨üá≠',
  'greece': 'üá¨üá∑',
  'grenada': 'üá¨üá©',
  'guatemala': 'üá¨üáπ',
  'guinea': 'üá¨üá≥',
  'guinea-bissau': 'üá¨üáº',
  'guyana': 'üá¨üáæ',
  
  // H
  'haiti': 'üá≠üáπ',
  'honduras': 'üá≠üá≥',
  'hong kong': 'üá≠üá∞',
  'hungary': 'üá≠üá∫',
  
  // I
  'iceland': 'üáÆüá∏',
  'india': 'üáÆüá≥',
  'indonesia': 'üáÆüá©',
  'iran': 'üáÆüá∑',
  'iraq': 'üáÆüá∂',
  'ireland': 'üáÆüá™',
  'israel': 'üáÆüá±',
  'italy': 'üáÆüáπ',
  'ivory coast': 'üá®üáÆ',
  
  // J
  'jamaica': 'üáØüá≤',
  'japan': 'üáØüáµ',
  'jordan': 'üáØüá¥',
  
  // K
  'kazakhstan': 'üá∞üáø',
  'kenya': 'üá∞üá™',
  'kiribati': 'üá∞üáÆ',
  'korea': 'üá∞üá∑',
  'kosovo': 'üáΩüá∞',
  'kuwait': 'üá∞üáº',
  'kyrgyzstan': 'üá∞üá¨',
  
  // L
  'laos': 'üá±üá¶',
  'latvia': 'üá±üáª',
  'lebanon': 'üá±üáß',
  'lesotho': 'üá±üá∏',
  'liberia': 'üá±üá∑',
  'libya': 'üá±üáæ',
  'liechtenstein': 'üá±üáÆ',
  'lithuania': 'üá±üáπ',
  'luxembourg': 'üá±üá∫',
  
  // M
  'macao': 'üá≤üá¥',
  'macau': 'üá≤üá¥',
  'madagascar': 'üá≤üá¨',
  'malawi': 'üá≤üáº',
  'malaysia': 'üá≤üáæ',
  'maldives': 'üá≤üáª',
  'mali': 'üá≤üá±',
  'malta': 'üá≤üáπ',
  'marshall islands': 'üá≤üá≠',
  'mauritania': 'üá≤üá∑',
  'mauritius': 'üá≤üá∫',
  'mexico': 'üá≤üáΩ',
  'micronesia': 'üá´üá≤',
  'moldova': 'üá≤üá©',
  'monaco': 'üá≤üá®',
  'mongolia': 'üá≤üá≥',
  'montenegro': 'üá≤üá™',
  'morocco': 'üá≤üá¶',
  'mozambique': 'üá≤üáø',
  'myanmar': 'üá≤üá≤',
  
  // N
  'namibia': 'üá≥üá¶',
  'nauru': 'üá≥üá∑',
  'nepal': 'üá≥üáµ',
  'netherlands': 'üá≥üá±',
  'new zealand': 'üá≥üáø',
  'nicaragua': 'üá≥üáÆ',
  'niger': 'üá≥üá™',
  'nigeria': 'üá≥üá¨',
  'north korea': 'üá∞üáµ',
  'north macedonia': 'üá≤üá∞',
  'macedonia': 'üá≤üá∞',
  'norway': 'üá≥üá¥',
  
  // O
  'oman': 'üá¥üá≤',
  
  // P
  'pakistan': 'üáµüá∞',
  'palau': 'üáµüáº',
  'palestine': 'üáµüá∏',
  'panama': 'üáµüá¶',
  'papua new guinea': 'üáµüá¨',
  'paraguay': 'üáµüáæ',
  'peru': 'üáµüá™',
  'philippines': 'üáµüá≠',
  'poland': 'üáµüá±',
  'portugal': 'üáµüáπ',
  'puerto rico': 'üáµüá∑',
  
  // Q
  'qatar': 'üá∂üá¶',
  
  // R
  'romania': 'üá∑üá¥',
  'russia': 'üá∑üá∫',
  'russian federation': 'üá∑üá∫',
  'rwanda': 'üá∑üáº',
  
  // S
  'saint kitts and nevis': 'üá∞üá≥',
  'saint lucia': 'üá±üá®',
  'saint vincent and the grenadines': 'üáªüá®',
  'samoa': 'üáºüá∏',
  'san marino': 'üá∏üá≤',
  'sao tome and principe': 'üá∏üáπ',
  'saudi arabia': 'üá∏üá¶',
  'scotland': 'üè¥Û†ÅßÛ†Å¢Û†Å≥Û†Å£Û†Å¥Û†Åø',
  'senegal': 'üá∏üá≥',
  'serbia': 'üá∑üá∏',
  'seychelles': 'üá∏üá®',
  'sierra leone': 'üá∏üá±',
  'singapore': 'üá∏üá¨',
  'slovakia': 'üá∏üá∞',
  'slovenia': 'üá∏üáÆ',
  'solomon islands': 'üá∏üáß',
  'somalia': 'üá∏üá¥',
  'south africa': 'üáøüá¶',
  'south korea': 'üá∞üá∑',
  'south sudan': 'üá∏üá∏',
  'spain': 'üá™üá∏',
  'sri lanka': 'üá±üá∞',
  'sudan': 'üá∏üá©',
  'suriname': 'üá∏üá∑',
  'swaziland': 'üá∏üáø',
  'sweden': 'üá∏üá™',
  'switzerland': 'üá®üá≠',
  'syria': 'üá∏üáæ',
  
  // T
  'taiwan': 'üáπüáº',
  'tajikistan': 'üáπüáØ',
  'tanzania': 'üáπüáø',
  'thailand': 'üáπüá≠',
  'timor-leste': 'üáπüá±',
  'togo': 'üáπüá¨',
  'tonga': 'üáπüá¥',
  'trinidad and tobago': 'üáπüáπ',
  'tunisia': 'üáπüá≥',
  'turkey': 'üáπüá∑',
  't√ºrkiye': 'üáπüá∑',
  'turkmenistan': 'üáπüá≤',
  'tuvalu': 'üáπüáª',
  
  // U
  'uganda': 'üá∫üá¨',
  'ukraine': 'üá∫üá¶',
  'united arab emirates': 'üá¶üá™',
  'uae': 'üá¶üá™',
  'united kingdom': 'üá¨üáß',
  'uk': 'üá¨üáß',
  'great britain': 'üá¨üáß',
  'britain': 'üá¨üáß',
  'united states': 'üá∫üá∏',
  'usa': 'üá∫üá∏',
  'us': 'üá∫üá∏',
  'uruguay': 'üá∫üáæ',
  'uzbekistan': 'üá∫üáø',
  
  // V
  'vanuatu': 'üáªüá∫',
  'vatican city': 'üáªüá¶',
  'venezuela': 'üáªüá™',
  'vietnam': 'üáªüá≥',
  'viet nam': 'üáªüá≥',
  
  // W
  'wales': 'üè¥Û†ÅßÛ†Å¢Û†Å∑Û†Å¨Û†Å≥Û†Åø',
  
  // Y
  'yemen': 'üáæüá™',
  
  // Z
  'zambia': 'üáøüá≤',
  'zimbabwe': 'üáøüáº',
};

/**
 * Get flag emoji for a country name
 * @param country - Country name
 * @returns Flag emoji or globe fallback
 */
export function getFlag(country: string): string {
  if (!country) return 'üåç';
  
  const normalized = country.toLowerCase().trim();
  return countryFlags[normalized] || 'üåç';
}

/**
 * Device emoji mapping based on source string from X API
 * iOS (App Store) = üçé
 * Android = ü§ñ
 * Web = üåê
 * Unknown = ‚ùì
 */
export function getDeviceEmoji(deviceString: string | null | undefined): string {
  if (!deviceString) return '‚ùì';
  
  const d = deviceString.toLowerCase();
  
  // iOS devices (App Store = iPhone/iPad)
  if (d.includes('app store') || d.includes('ios') || d.includes('iphone') || d.includes('ipad')) {
    return 'üçé';
  }
  
  // Android devices
  if (d.includes('android')) {
    return 'ü§ñ';
  }
  
  // Web clients (desktop or mobile browser)
  if (d.includes('web') || d === 'x' || d === 'twitter' || d.includes('browser')) {
    return 'üåê';
  }
  
  // Unknown device type
  return '‚ùì';
}

/**
 * Get device type from device string
 */
export function getDeviceType(deviceString: string | null | undefined): 'ios' | 'android' | 'web' | 'unknown' {
  if (!deviceString) return 'unknown';
  
  const d = deviceString.toLowerCase();
  
  if (d.includes('app store') || d.includes('ios') || d.includes('iphone') || d.includes('ipad')) {
    return 'ios';
  }
  
  if (d.includes('android')) {
    return 'android';
  }
  
  if (d.includes('web') || d === 'x' || d === 'twitter' || d.includes('browser')) {
    return 'web';
  }
  
  return 'unknown';
}

/**
 * Get device label from device string
 */
export function getDeviceLabel(deviceString: string | null | undefined): string {
  const type = getDeviceType(deviceString);
  
  switch (type) {
    case 'ios':
      return 'iOS';
    case 'android':
      return 'Android';
    case 'web':
      return 'Web';
    default:
      return 'Unknown';
  }
}

/**
 * Get device color based on type - Updated to match new cyan/teal theme
 */
export function getDeviceColor(deviceString: string | null | undefined): string {
  const type = getDeviceType(deviceString);
  
  switch (type) {
    case 'ios':
      return '#00D4FF';  // Cyan - matches primary
    case 'android':
      return '#00FFB3';  // Teal - matches secondary
    case 'web':
      return '#00BFFF';  // Light cyan for web
    default:
      return '#6B7280';  // Neutral gray
  }
}

/**
 * Format country name for display (title case)
 */
export function formatCountryName(country: string | null | undefined): string {
  if (!country) return '';
  
  return country
    .split(' ')
    .map(word => word.charAt(0).toUpperCase() + word.slice(1).toLowerCase())
    .join(' ');
}

/**
 * Get ISO country code from country name
 */
export function getCountryCode(location: string | null | undefined): string {
  if (!location) return '';
  
  const COUNTRY_CODES: Record<string, string> = {
    'united states': 'US', 'usa': 'US', 'us': 'US',
    'united kingdom': 'UK', 'uk': 'UK', 'britain': 'UK', 'great britain': 'UK', 'england': 'UK',
    'germany': 'DE', 'france': 'FR', 'spain': 'ES', 'italy': 'IT',
    'russia': 'RU', 'russian federation': 'RU',
    'china': 'CN', 'japan': 'JP', 'india': 'IN', 'brazil': 'BR',
    'canada': 'CA', 'australia': 'AU', 'mexico': 'MX',
    'netherlands': 'NL', 'belgium': 'BE', 'switzerland': 'CH',
    'sweden': 'SE', 'norway': 'NO', 'denmark': 'DK', 'finland': 'FI',
    'poland': 'PL', 'ukraine': 'UA', 'turkey': 'TR', 't√ºrkiye': 'TR',
    'south korea': 'KR', 'korea': 'KR', 'north korea': 'KP',
    'israel': 'IL', 'iran': 'IR', 'iraq': 'IQ', 'saudi arabia': 'SA',
    'egypt': 'EG', 'south africa': 'ZA', 'nigeria': 'NG',
    'argentina': 'AR', 'chile': 'CL', 'colombia': 'CO', 'peru': 'PE',
    'indonesia': 'ID', 'thailand': 'TH', 'vietnam': 'VN', 'viet nam': 'VN',
    'philippines': 'PH', 'malaysia': 'MY', 'singapore': 'SG',
    'pakistan': 'PK', 'bangladesh': 'BD', 'sri lanka': 'LK',
    'portugal': 'PT', 'greece': 'GR', 'ireland': 'IE', 'austria': 'AT',
    'czech republic': 'CZ', 'czechia': 'CZ', 'romania': 'RO', 'hungary': 'HU',
  };
  
  const key = location.trim().toLowerCase();
  return COUNTRY_CODES[key] || location.substring(0, 2).toUpperCase();
}
